import*as e from"react";import{useEventListener as n}from"primereact/hooks";import{ObjectUtils as r,classNames as t,DomHandler as a}from"primereact/utils";function l(){return l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},l.apply(this,arguments)}function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function u(e){if(Array.isArray(e))return i(e)}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,n){if(e){if("string"==typeof e)return i(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,n):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){if(Array.isArray(e))return e}function p(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,l=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(t=r.next()).done)&&(l.push(t.value),!n||l.length!==n);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return l}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,n){return m(e)||p(e,n)||s(e,n)||d()}function b(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?b(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var h=e.memo(e.forwardRef((function(o,i){var m=e.useRef(null),p=e.useRef(0),d=e.useRef(!1),b=e.useRef(!1),g=e.useRef(0),w=e.useRef(0),O=e.useRef(0),E=e.useRef(0),S=o.range?o.value||[0,100]:o.value||0,x="horizontal"===o.orientation,j="vertical"===o.orientation,A=y(n({type:"mousemove",listener:function(e){return H(e)}}),2),P=A[0],R=A[1],D=y(n({type:"mouseup",listener:function(e){return K(e)}}),2),I=D[0],C=D[1],N=y(n({type:"touchmove",listener:function(e){return H(e)}}),2),M=N[0],T=N[1],k=y(n({type:"touchend",listener:function(e){return K(e)}}),2),F=k[0],z=k[1],W=function(e,n){$(e,(o.range?S[p.current]:S)+(o.step||1)*n),e.preventDefault()},Y=function(e,n){o.disabled||(b.current=!0,_(),d.current=!0,p.current=n)},H=function(e){b.current&&(B(e),e.preventDefault())},K=function(e){b.current&&(b.current=!1,o.onSlideEnd&&o.onSlideEnd({originalEvent:e,value:o.value}),R(),C(),T(),z())},L=function(e,n){P(),I(),Y(0,n)},U=function(e,n){M(),F(),Y(0,n)},X=function(e,n){if(!o.disabled){p.current=n;var r=e.key;"ArrowRight"===r||"ArrowUp"===r?W(e,1):"ArrowLeft"!==r&&"ArrowDown"!==r||W(e,-1)}},_=function(){var e=m.current.getBoundingClientRect();g.current=e.left+a.getWindowScrollLeft(),w.current=e.top+a.getWindowScrollTop(),O.current=m.current.offsetWidth,E.current=m.current.offsetHeight},B=function(e){var n=(x?100*((e.touches?e.touches[0].pageX:e.pageX)-g.current)/O.current:100*(w.current+E.current-(e.touches?e.touches[0].pageY:e.pageY))/E.current)/100*(o.max-o.min)+o.min;if(o.step){var r=o.range?S[p.current]:S,t=n-r;t<0?n=r+Math.ceil(n/o.step-r/o.step)*o.step:t>0&&(n=r+Math.floor(n/o.step-r/o.step)*o.step)}else n=Math.floor(n);return $(e,n)},$=function(e,n){var r,t=parseFloat(n.toFixed(10)),a=t;return o.range?(0===p.current?t<o.min?t=o.min:t>S[1]&&(t=S[1]):t>o.max?t=o.max:t<S[0]&&(t=S[0]),(a=u(r=S)||c(r)||s(r)||f())[p.current]=t,o.onChange&&o.onChange({originalEvent:e,value:a})):(t<o.min?t=o.min:t>o.max&&(t=o.max),a=t,o.onChange&&o.onChange({originalEvent:e,value:a})),a},q=function(n,r,a){var l={transition:b.current?"none":null,left:null!==n&&n+"%",bottom:r&&r+"%"},i=t("p-slider-handle",{"p-slider-handle-start":0===a,"p-slider-handle-end":1===a,"p-slider-handle-active":p.current===a});return e.createElement("span",{className:i,style:l,tabIndex:o.tabIndex,role:"slider",onMouseDown:function(e){return L(0,a)},onTouchStart:function(e){return U(0,a)},onKeyDown:function(e){return X(e,a)},"aria-valuemin":o.min,"aria-valuemax":o.max,"aria-valuenow":n||r,"aria-labelledby":o["aria-labelledby"],"aria-label":o["aria-label"],"aria-orientation":o.orientation})};e.useImperativeHandle(i,(function(){return v({getElement:function(){return m.current}},o)}));var G,J,Q,V,Z=r.findDiffKeys(o,h.defaultProps),ee=t("p-slider p-component",o.className,{"p-disabled":o.disabled,"p-slider-horizontal":x,"p-slider-vertical":j}),ne=o.range?(G=100*(S[0]<o.min?0:S[0]-o.min)/(o.max-o.min),J=100*(S[1]>o.max?100:S[1]-o.min)/(o.max-o.min),Q=x?q(G,null,0):q(null,G,0),V=x?q(J,null,1):q(null,J,1),e.createElement(e.Fragment,null,e.createElement("span",{className:"p-slider-range",style:x?{left:G+"%",width:J-G+"%"}:{bottom:G+"%",height:J-G+"%"}}),Q,V)):function(){var n;n=S<o.min?0:S>o.max?100:100*(S-o.min)/(o.max-o.min);var r=x?{width:n+"%"}:{height:n+"%"},t=x?q(n,null,null):q(null,n,null);return e.createElement(e.Fragment,null,e.createElement("span",{className:"p-slider-range",style:r}),t)}();return e.createElement("div",l({ref:m,id:o.id,style:o.style,className:ee},Z,{onClick:function(e){if(!o.disabled){if(!d.current){_();var n=B(e);o.onSlideEnd&&o.onSlideEnd({originalEvent:e,value:n})}d.current=!1}}}),ne)})));h.displayName="Slider",h.defaultProps={__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,"aria-label":null,"aria-labelledby":null};export{h as Slider};
