import*as e from"react";import{CSSTransition as t}from"primereact/csstransition";import{useMountEffect as n,useUpdateEffect as r}from"primereact/hooks";import{classNames as l,IconUtils as a,ObjectUtils as i,UniqueComponentId as o}from"primereact/utils";function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){if(Array.isArray(e))return c(e)}function p(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return s(e)||p(e)||d(e)||f()}function y(e){if(Array.isArray(e))return e}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return y(e)||v(e,t)||d(e,t)||g()}var N=e.memo((function(r){var o=h(e.useState(null),2),u=o[0],m=o[1],c=function(){if(r.model){if(r.multiple)return r.model.filter((function(e){return e.expanded}));var e=null;return r.model.forEach((function(t){t.expanded&&(e?t.expanded=!1:e=t)})),e}return null},s=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var n=u;p(t)?(t.expanded=!1,m(r.multiple?n.filter((function(e){return e!==t})):null)):(!r.multiple&&n&&(n.expanded=!1),t.expanded=!0,m(r.multiple?[].concat(b(n||[]),[t]):t))}},p=function(e){return u&&(r.multiple?u.indexOf(e)>-1:u===e)};n((function(){m(c())}));var d=function(t){return e.createElement("li",{key:"separator_"+t,className:"p-menu-separator"})},f=function(n,a){var i=l("p-toggleable-content",{"p-toggleable-content-collapsed":!a}),o=e.createRef();return n.items?e.createElement(t,{nodeRef:o,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},in:a,unmountOnExit:!0},e.createElement("div",{ref:o,className:i},e.createElement(N,{menuProps:r.menuProps,model:n.items,multiple:r.multiple}))):null},y=function(t,n){var o=t.label+"_"+n,u=p(t),m=l("p-menuitem",t.className),c=l("p-menuitem-link",{"p-disabled":t.disabled}),d=l("p-menuitem-icon",t.icon),b=l("p-panelmenu-icon pi pi-fw",{"pi-angle-right":!u,"pi-angle-down":u}),y=a.getJSXIcon(t.icon,{className:"p-menuitem-icon"},{props:r.menuProps}),v=t.label&&e.createElement("span",{className:"p-menuitem-text"},t.label),g=t.items&&e.createElement("span",{className:b}),h=f(t,u),N=e.createElement("a",{href:t.url||"#",className:c,target:t.target,onClick:function(e){return s(e,t)},role:"menuitem","aria-disabled":t.disabled},g,y,v);t.template&&(N=i.getJSXElement(t.template,t,{onClick:function(e){return s(e,t)},className:c,labelClassName:"p-menuitem-text",iconClassName:d,submenuIconClassName:b,element:N,props:r,leaf:!t.items,active:u}));return e.createElement("li",{key:o,id:t.id,className:m,style:t.style,role:"none"},N,h)},v=function(e,t){return e.separator?d(t):y(e,t)},g=l("p-submenu-list",r.className),E=r.model?r.model.map(v):null;return e.createElement("ul",{className:g,role:"tree"},E)}));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}N.displayName="PanelMenuSub";var x=e.memo(e.forwardRef((function(m,c){var s=h(e.useState(m.id),2),p=s[0],d=s[1],f=h(e.useState(null),2),y=f[0],v=f[1],g=h(e.useState(!1),2),E=g[0],P=g[1],S=e.useRef(null),j=p+"_header",w=p+"_content",k=function(){if(m.model){if(m.multiple)return m.model.filter((function(e){return e.expanded}));var e=null;return m.model.forEach((function(t){t.expanded&&(e?t.expanded=!1:e=t)})),e}return null},C=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var n=y;I(t)?(t.expanded=!1,v(m.multiple?n.filter((function(e){return e!==t})):null)):(!m.multiple&&n&&(n.expanded=!1),t.expanded=!0,v(m.multiple?[].concat(b(n||[]),[t]):t))}},I=function(e){return y&&(m.multiple?y.indexOf(e)>-1:y===e)};e.useImperativeHandle(c,(function(){return O({getElement:function(){return S.current}},m)})),n((function(){p||d(o()),v(k())})),r((function(){P(!0),v(k())}),[m.model]);var A=function(){P(!1)},D=function(n,r){var o=n.label+"_"+r,u=I(n),c=l("p-panelmenu-panel",n.className),s=l("p-component p-panelmenu-header",{"p-highlight":u,"p-disabled":n.disabled}),p=l("p-panelmenu-icon pi",{"pi-chevron-right":!u," pi-chevron-down":u}),d=l("p-menuitem-icon",n.icon),f=a.getJSXIcon(n.icon,{className:"p-menuitem-icon"},{props:m}),b=n.items&&e.createElement("span",{className:p}),y=n.label&&e.createElement("span",{className:"p-menuitem-text"},n.label),v=l("p-toggleable-content",{"p-toggleable-content-collapsed":!u}),g=e.createRef(),h=e.createElement("a",{href:n.url||"#",className:"p-panelmenu-header-link",onClick:function(e){return C(e,n)},"aria-expanded":u,id:j,"aria-controls":w,"aria-disabled":n.disabled},b,f,y);n.template&&(h=i.getJSXElement(n.template,n,{onClick:function(e){return C(e,n)},className:"p-panelmenu-header-link",labelClassName:"p-menuitem-text",submenuIconClassName:p,iconClassName:d,element:h,props:m,leaf:!n.items,active:u}));return e.createElement("div",{key:o,className:c,style:n.style},e.createElement("div",{className:s,style:n.style},h),e.createElement(t,{nodeRef:g,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},onEnter:A,disabled:E,in:u,unmountOnExit:!0,options:m.transitionOptions},e.createElement("div",{ref:g,className:v,role:"region",id:w,"aria-labelledby":j},e.createElement("div",{className:"p-panelmenu-content"},e.createElement(N,{menuProps:m,model:n.items,className:"p-panelmenu-root-submenu",multiple:m.multiple})))))},_=i.findDiffKeys(m,x.defaultProps),R=l("p-panelmenu p-component",m.className),J=m.model?m.model.map(D):null;return e.createElement("div",u({id:m.id,ref:S,className:R,style:m.style},_),J)})));x.displayName="PanelMenu",x.defaultProps={__TYPE:"Panel",id:null,model:null,style:null,className:null,multiple:!1,transitionOptions:null};export{x as PanelMenu};
