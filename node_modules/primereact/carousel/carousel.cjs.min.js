"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),r=require("primereact/button"),n=require("primereact/hooks"),a=require("primereact/utils");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var c=u(e),o=l(t);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){if(Array.isArray(e))return p(e)}function f(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){if(Array.isArray(e))return e}function g(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],u=!0,c=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{u||null==r.return||r.return()}finally{if(c)throw a}}return l}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){return b(e)||g(e,t)||v(e,t)||h()}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=c.memo((function(e){var t=e.template(e.item),r=a.classNames(e.className,"p-carousel-item",{"p-carousel-item-active":e.active,"p-carousel-item-start":e.start,"p-carousel-item-end":e.end});return c.createElement("div",{className:r},t)})),E=c.memo(c.forwardRef((function(e,l){var u=y(c.useState(e.numVisible),2),s=u[0],p=u[1],b=y(c.useState(e.numScroll),2),g=b[0],h=b[1],N=y(c.useState(e.page*e.numScroll*-1),2),j=N[0],C=N[1],S=y(c.useState(e.page),2),w=S[0],I=S[1],k=c.useRef(null),T=c.useRef(null),x=c.useRef(0),R=c.useRef(!!e.autoplayInterval),D=c.useRef(""),M=c.useRef(20),A=c.useRef(null),V=c.useRef(null),L=c.useRef(null),_=c.useRef(!1),H=c.useRef(null),q=n.usePrevious(g),U=n.usePrevious(s),z=n.usePrevious(e.value),B=n.usePrevious(e.page),Y="vertical"===e.orientation,X=e.circular||!!e.autoplayInterval,F=X&&e.value&&e.value.length>=s,K=e.onPageChange?e.page:w,W=e.value?Math.max(Math.ceil((e.value.length-s)/g)+1,0):0,$=W&&e.autoplayInterval&&R.current,G=y(n.useResizeListener({listener:function(){Q()},when:e.responsiveOptions}),1)[0],J=function(t,r){var n=j;null!=r?(n=g*r*-1,F&&(n-=s),_.current=!1):(n+=g*t,_.current&&(n+=x.current-g*t,_.current=!1),r=Math.abs(Math.floor((F?n+s:n)/g)));F&&w===W-1&&-1===t?(n=-1*(e.value.length+s),r=0):F&&0===w&&1===t?(n=0,r=W-1):r===W-1&&x.current>0&&(n+=-1*x.current-g*t,_.current=!0),T.current&&(a.DomHandler.removeClass(T.current,"p-items-hidden"),ie(n),T.current.style.transition="transform 500ms ease 0s"),e.onPageChange?(C(n),e.onPageChange({page:r})):(I(r),C(n))},Q=function(){if(T.current&&H.current){for(var t=window.innerWidth,r={numVisible:e.numVisible,numScroll:e.numScroll},n=0;n<H.current.length;n++){var a=H.current[n];parseInt(a.breakpoint,10)>=t&&(r=a)}if(g!==r.numScroll){var l=Math.floor(K*g/r.numScroll),u=r.numScroll*l*-1;F&&(u-=r.numVisible),C(u),h(r.numScroll),e.onPageChange?e.onPageChange({page:l}):I(l)}s!==r.numVisible&&p(r.numVisible)}},Z=function(e,t){(X||0!==K)&&J(1,t),R.current=!1,e.cancelable&&e.preventDefault()},ee=function(e,t){(X||K<W-1)&&J(-1,t),R.current=!1,e.cancelable&&e.preventDefault()},te=function(e,t){t>K?ee(e,t):t<K&&Z(e,t)},re=function(e){T.current&&"transform"===e.propertyName&&(a.DomHandler.addClass(T.current,"p-items-hidden"),T.current.style.transition="",0!==w&&w!==W-1||!F||ie(j))},ne=function(e){var t=e.changedTouches[0];A.current={x:t.pageX,y:t.pageY}},ae=function(e){e.cancelable&&e.preventDefault()},le=function(e){var t=e.changedTouches[0];ue(e,Y?t.pageY-A.current.y:t.pageX-A.current.x)},ue=function(e,t){Math.abs(t)>M&&(t<0?ee(e):Z(e))},ce=function(){V.current&&clearInterval(V.current)},oe=function(){L.current||(L.current=a.DomHandler.createInlineStyle(o.default.nonce));var t,r="\n            .p-carousel[".concat(D.current,"] .p-carousel-item {\n                flex: 1 0 ").concat(100/s,"%\n            }\n        ");if(e.responsiveOptions){H.current=m(t=e.responsiveOptions)||f(t)||v(t)||d(),H.current.sort((function(e,t){return a.ObjectUtils.sort(e.breakpoint,t.breakpoint,-1,o.default.locale)}));for(var n=0;n<H.current.length;n++){var l=H.current[n];r+="\n                    @media screen and (max-width: ".concat(l.breakpoint,") {\n                        .p-carousel[").concat(D.current,"] .p-carousel-item {\n                            flex: 1 0 ").concat(100/l.numVisible,"%\n                        }\n                    }\n                ")}}L.current.innerHTML=r},ie=function(e){T.current&&(T.current.style.transform=Y?"translate3d(0, ".concat(e*(100/s),"%, 0)"):"translate3d(".concat(e*(100/s),"%, 0, 0)"))};c.useImperativeHandle(l,(function(){return O({getElement:function(){return k.current}},e)})),n.useMountEffect((function(){k.current&&(D.current=a.UniqueComponentId(),k.current.setAttribute(D.current,"")),oe(),Q(),ie(j),G()})),n.useUpdateEffect((function(){var t=!1,r=j;if(e.autoplayInterval&&ce(),q!==g||U!==s||e.value&&z&&z.length!==e.value.length){x.current=(e.value.length-s)%g;var n=K;0!==W&&n>=W&&(n=W-1,e.onPageChange?e.onPageChange({page:n}):I(n),t=!0),r=n*g*-1,F&&(r-=s),n===W-1&&x.current>0?(r+=-1*x.current+g,_.current=!0):_.current=!1,r!==j&&(C(r),t=!0),ie(r)}F&&(0===w?r=-1*s:0===r&&(r=-1*e.value.length,x.current>0&&(_.current=!0)),r!==j&&(C(r),t=!0)),B!==e.page&&(e.page>B&&e.page<=W-1?J(-1,e.page):e.page<B&&J(1,e.page)),!t&&$&&(V.current=setInterval((function(){J(-1,w===W-1?0:w+1)}),e.autoplayInterval))})),n.useUnmountEffect((function(){e.autoplayInterval&&ce()}));var se=function(){if(e.value&&e.value.length){var t=null,r=null;if(F){var n=null;t=(n=e.value.slice(-1*s)).map((function(t,r){return c.createElement(P,{key:r+"_scloned",className:"p-carousel-item-cloned",template:e.itemTemplate,item:t,active:-1*j===e.value.length+s,start:0===r,end:r===n.length-1})})),r=(n=e.value.slice(0,s)).map((function(t,r){return c.createElement(P,{key:r+"_fcloned",className:"p-carousel-item-cloned",template:e.itemTemplate,item:t,active:0===j,start:0===r,end:r===n.length-1})}))}var a=e.value.map((function(t,r){var n=F?-1*(j+s):-1*j,a=n+s-1;return c.createElement(P,{key:r,template:e.itemTemplate,item:t,active:n<=r&&a>=r,start:n===r,end:a===r})}));return c.createElement(c.Fragment,null,t,a,r)}},pe=function(){var n=(!X||e.value&&e.value.length<s)&&0===K,l=a.classNames("p-carousel-prev p-link",{"p-disabled":n}),u=a.classNames("p-carousel-prev-icon pi",{"pi-chevron-left":!Y,"pi-chevron-up":Y});return c.createElement(r.Button,{type:"button",className:l,icon:u,onClick:Z,disabled:n,"aria-label":t.ariaLabel("previousPageLabel")})},me=function(){var n=(!X||e.value&&e.value.length<s)&&(K===W-1||0===W),l=a.classNames("p-carousel-next p-link",{"p-disabled":n}),u=a.classNames("p-carousel-next-icon pi",{"pi-chevron-right":!Y,"pi-chevron-down":Y});return c.createElement(r.Button,{type:"button",className:l,icon:u,onClick:ee,disabled:n,"aria-label":t.ariaLabel("nextPageLabel")})},fe=function(e){var n="carousel-indicator-"+e,l=a.classNames("p-carousel-indicator",{"p-highlight":K===e});return c.createElement("li",{key:n,className:l},c.createElement(r.Button,{type:"button",className:"p-link",onClick:function(t){return te(t,e)},"aria-label":"".concat(t.ariaLabel("pageLabel")," ").concat(e+1)}))},ve=a.ObjectUtils.findDiffKeys(e,E.defaultProps),de=a.classNames("p-carousel p-component",{"p-carousel-vertical":Y,"p-carousel-horizontal":!Y},e.className),be=a.classNames("p-carousel-content",e.contentClassName),ge=function(){var t=se(),r=Y?e.verticalViewPortHeight:"auto",n=pe(),l=me(),u=a.classNames("p-carousel-container",e.containerClassName);return c.createElement("div",{className:u},n,c.createElement("div",{className:"p-carousel-items-content",style:{height:r},onTouchStart:ne,onTouchMove:ae,onTouchEnd:le},c.createElement("div",{ref:T,className:"p-carousel-items-container",onTransitionEnd:re},t)),l)}(),he=function(){for(var t=a.classNames("p-carousel-indicators p-reset",e.indicatorsContentClassName),r=[],n=0;n<W;n++)r.push(fe(n));return c.createElement("ul",{className:t},r)}(),ye=e.header?c.createElement("div",{className:"p-carousel-header"},e.header):null,Ne=e.footer?c.createElement("div",{className:"p-carousel-footer"},e.footer):null;return c.createElement("div",i({ref:k,id:e.id,className:de,style:e.style},ve),ye,c.createElement("div",{className:be},ge,he),Ne)})));P.displayName="CarouselItem",E.displayName="Carousel",E.defaultProps={__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,autoplayInterval:0,numVisible:1,numScroll:1,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null},exports.Carousel=E;
